(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[1],{107:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(16),s=n.n(a),o=n(30),i=(n(81),n(57),n(26)),u=n(27),l=n(38),j=n(37),d=(n(82),n(69)),b=n.n(d),h=n(1),f=function(e){return Object(h.jsxs)("p",{className:b.a.Footer,children:["Powered by ",Object(h.jsx)("i",{className:"fab fa-atlassian"})," Apna Bank"]})},O=n(13),p=n(110),m=n(70),y=n.n(m),x=n(6),w=n(25),v=n.n(w),S=n(2),_=n(34),k=n(109),g=n(71),E=n.n(g),P=n(18),N=n(35),C=n(36),A=function(e){var t=Object(r.useState)({accountNumber:"",ifscCode:"",mobileNumber:""}),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!0),o=Object(O.a)(s,2),i=o[0],u=o[1],l=Object(P.c)((function(e){return e.user.name})),j=Object(P.c)((function(e){return e.user.username}));return Object(r.useEffect)((function(){if(e.showProfileModal){var t=function(){var e=Object(_.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,N.a.get("/api/profile",{params:{username:j}});case 3:t=e.sent,console.log(t.data),a(Object(S.a)({},t.data)),u(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}}),[e.showProfileModal]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(k.a,{show:e.showProfileModal,onHide:e.handleClose,backdrop:"static",keyboard:!1,children:[Object(h.jsxs)(k.a.Header,{className:E.a.ModalHeader,children:[Object(h.jsx)(k.a.Title,{children:"Profile"}),Object(h.jsx)("i",{className:"fa fa-times","aria-hidden":"true",onClick:e.handleClose})]}),Object(h.jsx)(k.a.Body,{children:i?Object(h.jsx)("img",{src:C.a,alt:"loader",style:{display:"block",margin:"10vh auto"}}):Object(h.jsx)("div",{children:Object(h.jsx)("table",{children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Username"}),Object(h.jsx)("td",{children:j})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Name"}),Object(h.jsx)("td",{children:l})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Account Number"}),Object(h.jsx)("td",{children:c.accountNumber})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"IFSC Code"}),Object(h.jsx)("td",{children:c.ifscCode})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Mobile Number"}),Object(h.jsx)("td",{children:c.mobileNumber})]})]})})})})]})})},K=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(P.c)((function(e){return e.user?e.user.username:""})),s=Object(x.f)().location.pathname;return Object(P.c)((function(e){return e.auth}))&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A,{showProfileModal:n,handleClose:function(){return c(!1)}}),Object(h.jsxs)(p.a,{className:y.a.Parent,children:[Object(h.jsx)(o.b,{to:"/",children:Object(h.jsx)(p.a.Brand,{children:Object(h.jsx)("i",{className:"fab fa-atlassian",style:{fontSize:"2.5vw",color:"#871f42",verticalAlign:"middle"}})})}),Object(h.jsx)(p.a.Toggle,{}),Object(h.jsx)(p.a.Collapse,{className:"justify-content-end",children:Object(h.jsxs)(p.a.Text,{children:["/adminDashboard"!==s&&Object(h.jsx)("i",{className:"fas fa-user-circle",style:{color:"#871f42",fontSize:"2vw",verticalAlign:"middle",cursor:"pointer"},onClick:function(){return c(!0)}}),"\xa0",Object(h.jsxs)("span",{children:["Hi, ",a]}),"\xa0 \xa0 \xa0",Object(h.jsx)("i",{className:"fas fa-sign-out-alt",style:{color:"#871f42",fontSize:"1.5vw",verticalAlign:"middle",cursor:"pointer"},onClick:function(){return window.location.reload()}})]})})]})]})},T=n(53),L=function(){var e=Object(_.a)(v.a.mark((function e(){var t,n,r,c,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,crypto.subtle.exportKey("jwk",t.privateKey);case 5:return n=e.sent,e.next=8,window.crypto.subtle.importKey("jwk",n,{name:"RSA-OAEP",hash:"SHA-256"},!1,["decrypt"]);case 8:return r=e.sent,console.log(r),(c=indexedDB.open("db",1)).onupgradeneeded=function(){var e=c.result;e.objectStoreNames.contains("keyStore")||e.createObjectStore("keyStore")},c.onerror=function(){console.error("Error",c.error)},c.onsuccess=function(){var e=c.result.transaction("keyStore","readwrite").objectStore("keyStore").put(r,"key");e.onsuccess=function(){console.log("key added to the store",e.result)},e.onerror=function(){console.log("Error",e.error)}},e.next=16,crypto.subtle.exportKey("spki",t.publicKey);case 16:return a=e.sent,e.abrupt("return",Object(T.a)(a));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=L,I=c.a.lazy((function(){return new Promise((function(e){return setTimeout(e,100)})).then((function(){return Promise.all([n.e(7),n.e(6)]).then(n.bind(null,144))}))})),U=c.a.lazy((function(){return new Promise((function(e){return setTimeout(e,100)})).then((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,142))}))})),B=c.a.lazy((function(){return new Promise((function(e){return setTimeout(e,100)})).then((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,143))}))})),R=c.a.lazy((function(){return new Promise((function(e){return setTimeout(e,100)})).then((function(){return n.e(8).then(n.bind(null,140))}))})),D=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;sessionStorage.clear(),setTimeout((function(){window.location.reload()}),36e5),N.a.get("/api/getPublicKey").then((function(t){e.props.setServerPublicKey(t.data)})),M().then((function(t){e.props.setClientPublicKey(t)}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"App",children:["/auth"!==this.props.location.pathname&&"/admin"!==this.props.location.pathname&&Object(h.jsx)(K,{}),Object(h.jsx)(r.Suspense,{fallback:Object(h.jsx)("img",{src:C.a,alt:"loader",style:{display:"block",margin:"30vh auto"}}),children:Object(h.jsxs)(x.c,{children:[Object(h.jsx)(x.a,{path:"/chequeVerify",component:U}),Object(h.jsx)(x.a,{path:"/adminDashboard",component:R}),Object(h.jsx)(x.a,{path:"/auth",component:I}),Object(h.jsx)(x.a,{path:"/admin",component:I}),Object(h.jsx)(x.a,{path:"/",component:B}),Object(h.jsx)(x.a,{path:"*",component:I})]})}),Object(h.jsx)(f,{})]})}}]),n}(r.Component),F=Object(P.b)(null,(function(e){return{setServerPublicKey:function(t){return e({type:"SET_SERVER_PUBLIC_KEY",key:t})},setClientPublicKey:function(t){return e({type:"SET_CLIENT_PUBLIC_KEY",key:t})}}}))(Object(x.g)(D)),H=n(74),z={auth:!1,user:null,key:null,clientPublicKey:null,encryptedAesKey:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"False_Auth":return Object(S.a)(Object(S.a)({},e),{},{auth:!1,user:null,key:null,clientPublicKey:null,encryptedAesKey:null});case"True_Auth":return Object(S.a)(Object(S.a)({},e),{},{auth:!0,user:t.user});case"SET_SERVER_PUBLIC_KEY":return Object(S.a)(Object(S.a)({},e),{},{key:t.key});case"SET_CLIENT_PUBLIC_KEY":return Object(S.a)(Object(S.a)({},e),{},{clientPublicKey:t.key});case"SET_AES_KEY":return Object(S.a)(Object(S.a)({},e),{},{encryptedAesKey:t.key});default:return e}},Y=Object(H.a)(V,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(Object(h.jsx)(P.a,{store:Y,children:Object(h.jsx)(o.a,{children:Object(h.jsx)(F,{})})}),document.getElementById("root"))},35:function(e,t,n){"use strict";var r=n(72),c=n.n(r).a.create({baseURL:"https://apnacheques.herokuapp.com/"});c.defaults.headers.post["Content-Type"]="application/json;charset=utf-8",c.defaults.headers.post["Access-Control-Allow-Origin"]="*",c.interceptors.request.use((function(e){var t=JSON.parse(sessionStorage.getItem("token"));return t&&(e.headers=Object.assign({"x-access-token":t},e.headers)),e}),(function(e){return Promise.reject(e)})),t.a=c},36:function(e,t,n){"use strict";t.a=n.p+"static/media/loader.112b4cf0.svg"},53:function(e,t,n){"use strict";t.a=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,c=0;c<r;c++)t+=String.fromCharCode(n[c]);return window.btoa(t)}},69:function(e,t,n){e.exports={Footer:"Footer_Footer__238hM"}},70:function(e,t,n){e.exports={Parent:"Menu_Parent__2ur7L"}},71:function(e,t,n){e.exports={ModalHeader:"ProfileModal_ModalHeader__1evEn"}},81:function(e,t,n){},82:function(e,t,n){}},[[107,2,3]]]);
//# sourceMappingURL=main.cb0ba379.chunk.js.map