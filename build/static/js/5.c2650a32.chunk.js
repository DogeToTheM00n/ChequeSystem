(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{112:function(e,t,a){"use strict";t.a=function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}},113:function(e,t,a){"use strict";var n=a(25),r=a.n(n),c=a(34),s=a(112),o=a(53),i=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.importKey("spki",Object(s.a)(a),{name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt"]);case 2:return n=e.sent,c=new TextEncoder,e.next=6,window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,c.encode(JSON.stringify(t)));case 6:return i=e.sent,e.abrupt("return",Object(o.a)(i));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();t.a=i},116:function(e,t,a){"use strict";var n=a(25),r=a.n(n),c=a(34),s=a(117),o=a(53),i=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,i,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uint8Array.from([146,184,121,127,136,74,198,227,43,182,160,127,33,155,147,31]),e.t0=JSON,e.next=4,Object(s.a)(a);case 4:return e.t1=e.sent,c=e.t0.parse.call(e.t0,e.t1),e.next=8,window.crypto.subtle.importKey("jwk",JSON.parse(c),{name:"AES-GCM"},!0,["encrypt","decrypt"]);case 8:return i=e.sent,console.log(i),e.next=12,window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},i,t);case 12:return u=e.sent,e.abrupt("return",Object(o.a)(u));case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();t.a=i},117:function(e,t,a){"use strict";var n=a(25),r=a.n(n),c=a(34),s=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return new Promise((function(e,s){var o=indexedDB.open("db",1);o.onerror=function(){console.error("Error",o.error)},o.onsuccess=function(){var s=o.result.transaction("keyStore","readwrite").objectStore("keyStore").get("key");s.onsuccess=Object(c.a)(r.a.mark((function c(){var o;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("key added to the store",s.result),a=s.result,console.log(a),r.next=5,window.crypto.subtle.decrypt({name:"RSA-OAEP"},a,Uint8Array.from(atob(t),(function(e){return e.charCodeAt(0)})));case 5:n=r.sent,o=new TextDecoder,n=o.decode(n),e(n);case 9:case"end":return r.stop()}}),c)}))),s.onerror=function(){console.log("Error",s.error)}}}))},e.next=3,s();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=s},119:function(e,t,a){"use strict";var n=a(141),r=a(1);t.a=function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(n.a,{interval:null,variant:"dark",children:[Object(r.jsx)(n.a.Item,{children:Object(r.jsx)("img",{className:"d-block w-100",src:"data:image/png;base64,".concat(e.frontImage),alt:"First slide"})}),Object(r.jsx)(n.a.Item,{children:Object(r.jsx)("img",{className:"d-block w-100",src:"data:image/png;base64,".concat(e.backImage),alt:"Second slide"})})]})})}},134:function(e,t,a){e.exports={Parent:"CustomerDashboard_Parent__2EWcJ",Options:"CustomerDashboard_Options__SzCs6",ButtonDeposit:"CustomerDashboard_ButtonDeposit__2RHSP"}},135:function(e,t,a){e.exports={ModalHeader:"UploadChequeModal_ModalHeader__1lbI1",BootstrapButton:"UploadChequeModal_BootstrapButton__231oN",Error:"UploadChequeModal_Error__3kgmL"}},136:function(e,t,a){e.exports={Parent:"ChequeListItem_Parent__1_Qww",Id:"ChequeListItem_Id__3EdQF"}},137:function(e,t,a){e.exports={ModalHeader:"ImageModal_ModalHeader__2dahU"}},138:function(e,t,a){e.exports={Button:"ChequeList_Button__1DZ33",ButtonInactive:"ChequeList_ButtonInactive__TM10K",List:"ChequeList_List__3Ajzs",Filters:"ChequeList_Filters__2Hq3U"}},143:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(134),c=a.n(r),s=a(0),o=a(6),i=a(18),u=a(25),l=a.n(u),d=a(34),j=a(135),b=a.n(j),f=a(109),p=a(118),O=a(2),h=a(4),m=a(5),x=a.n(m),v=a(120),y=a(8),g=a(1),w=["as","bsPrefix","variant","size","active","className"],_=s.forwardRef((function(e,t){var a=e.as,r=e.bsPrefix,c=e.variant,s=e.size,o=e.active,i=e.className,u=Object(h.a)(e,w),l=Object(y.a)(r,"btn"),d=Object(v.a)(Object(O.a)({tagName:a},u)),j=Object(n.a)(d,2),b=j[0],f=j[1].tagName;return Object(g.jsx)(f,Object(O.a)(Object(O.a)(Object(O.a)({},u),b),{},{ref:t,className:x()(i,l,o&&"active",c&&"".concat(l,"-").concat(c),s&&"".concat(l,"-").concat(s),u.href&&u.disabled&&"disabled")}))}));_.displayName="Button",_.defaultProps={variant:"primary",active:!1,disabled:!1};var k=_,C=a(117),N=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var n,r,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uint8Array.from([146,184,121,127,136,74,198,227,43,182,160,127,33,155,147,31]),e.t0=JSON,e.next=4,Object(C.a)(a);case 4:return e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.next=8,window.crypto.subtle.importKey("jwk",JSON.parse(r),{name:"AES-GCM"},!0,["encrypt","decrypt"]);case 8:return c=e.sent,s=new TextEncoder,s.encode(JSON.stringify(t)),e.next=13,window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},c,t);case 13:return o=e.sent,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=N,I=a(116),B=a(35),A=a(113),q=a(53),M=a(36),P=function(e){var t=Object(s.useState)(!1),a=Object(n.a)(t,2),r=a[0],c=a[1],o=Object(s.useState)(),u=Object(n.a)(o,2),j=u[0],O=u[1],h=Object(s.useState)(),m=Object(n.a)(h,2),x=m[0],v=m[1],y=Object(i.c)((function(e){return e.encryptedAesKey})),w=Object(i.c)((function(e){return e.user})),_=Object(s.useState)(!1),C=Object(n.a)(_,2),N=C[0],I=C[1],P=Object(i.c)((function(e){return e.key})),D=Object(s.useRef)(null),E=Object(s.useState)(""),F=Object(n.a)(E,2),H=F[0],L=F[1],U=function(){var t=Object(d.a)(l.a.mark((function t(a){var n,r,s,o,i,u,d,b,f;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),I(!0),n=a.currentTarget,c(!0),!1!==n.checkValidity()){t.next=8;break}a.stopPropagation(),t.next=29;break;case 8:return r=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){a(e)},n.readAsArrayBuffer(e)}))},t.next=11,r(j);case 11:return s=t.sent,t.next=14,r(x);case 14:return o=t.sent,t.next=17,S(s,y);case 17:return i=t.sent,t.next=20,S(o,y);case 20:return u=t.sent,t.next=23,Object(A.a)({username:w.username,cheque_code:"-1"},P);case 23:return d=t.sent,b={images:[Object(q.a)(i),Object(q.a)(u)],obj:d},t.next=27,B.a.post("/api/depositCheque",b);case 27:"Cheque deposited successfully"==(f=t.sent).data?(c(!1),e.handleClose(),e.setReload(!e.reload)):(c(!1),L(f.data));case 29:I(!1);case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)(f.a,{show:e.showDepositModal,onHide:e.handleClose,backdrop:"static",keyboard:!1,style:{border:"none"},children:[Object(g.jsxs)(f.a.Header,{className:b.a.ModalHeader,style:{borderColor:"#871f42"},children:[Object(g.jsx)(f.a.Title,{children:"Deposit Cheque"}),Object(g.jsx)("i",{className:"fa fa-times","aria-hidden":"true",onClick:e.handleClose})]}),Object(g.jsx)(f.a.Body,{children:N?Object(g.jsx)("img",{src:M.a,alt:"loader",style:{display:"block",margin:"10vh auto"}}):Object(g.jsxs)(p.a,{ref:D,noValidate:!0,validated:r,onSubmit:U,children:[Object(g.jsxs)(p.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(g.jsx)(p.a.Label,{children:"Front Image"}),Object(g.jsx)(p.a.Control,{required:!0,type:"file",onChange:function(e){O(e.target.files[0])}})]}),Object(g.jsxs)(p.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(g.jsx)(p.a.Label,{children:"Back Image"}),Object(g.jsx)(p.a.Control,{required:!0,type:"file",onChange:function(e){v(e.target.files[0])}})]}),H?Object(g.jsx)("p",{className:b.a.Error,children:H}):null,Object(g.jsx)(k,{type:"submit",className:b.a.BootstrapButton,children:"Deposit"})]})})]})},D=a(136),E=a.n(D),F=a(137),H=a.n(F),L=a(119),U=a(112),J=function(e){var t=Object(i.c)((function(e){return e.encryptedAesKey})),a=Object(s.useState)(""),r=Object(n.a)(a,2),c=r[0],o=r[1],u=Object(s.useState)(""),j=Object(n.a)(u,2),b=j[0],p=j[1],O=Object(s.useState)(!0),h=Object(n.a)(O,2),m=h[0],x=h[1];return Object(s.useEffect)((function(){var a=function(){var a=Object(d.a)(l.a.mark((function a(){var n,r,c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return x(!0),a.next=3,B.a.get("/api/transactionDetail",{params:{_id:e._id}});case 3:return n=a.sent,console.log(Object(U.a)(n.data.chequePhotographs[0]).buffer),a.next=7,Object(I.a)(Object(U.a)(n.data.chequePhotographs[0]).buffer,t);case 7:return r=a.sent,o(r),a.next=11,Object(I.a)(Object(U.a)(n.data.chequePhotographs[1]).buffer,t);case 11:c=a.sent,p(c),x(!1);case 14:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();e.showImageModal&&a()}),[e.showImageModal]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(f.a,{show:e.showImageModal,onHide:e.handleClose,backdrop:"static",keyboard:!1,dialogClassName:"cheque-image",children:[Object(g.jsxs)(f.a.Header,{className:H.a.ModalHeader,children:[Object(g.jsx)(f.a.Title,{children:"Cheque Images"}),Object(g.jsx)("i",{className:"fa fa-times","aria-hidden":"true",onClick:e.handleClose})]}),Object(g.jsx)(f.a.Body,{children:m?Object(g.jsx)("img",{src:M.a,alt:"loader",style:{display:"block",margin:"10vh auto"}}):Object(g.jsx)(L.a,{frontImage:c,backImage:b})})]})})},R=function(e){var t=Object(s.useState)(!1),a=Object(n.a)(t,2),r=a[0],c=a[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(J,{showImageModal:r,handleClose:function(){return c(!1)},_id:e.id}),Object(g.jsxs)("div",{className:E.a.Parent,onClick:function(){return c(!0)},children:[Object(g.jsx)("div",{className:E.a.Id,children:e.id}),Object(g.jsxs)("div",{className:E.a.Status,children:[2===e.status?Object(g.jsxs)("span",{style:{color:"#a6a6a6",fontWeight:"bold"},children:[Object(g.jsx)("i",{className:"fas fa-clock","aria-hidden":"true",style:{color:"#a6a6a6"}}),"\xa0Pending"]}):null,1===e.status?Object(g.jsxs)("span",{style:{color:"#27a844",fontWeight:"bold"},children:[Object(g.jsx)("i",{className:"fa fa-check","aria-hidden":"true",style:{color:"#27a844"}}),"\xa0Verified"]}):null,0===e.status?Object(g.jsxs)("span",{style:{color:"#dc3546",fontWeight:"bold"},children:[Object(g.jsx)("i",{className:"fa fa-times","aria-hidden":"true",style:{color:"#dc3546"}}),"\xa0Declined"]}):null]})]})]})},T=a(138),G=a.n(T),K=function(e){var t=Object(s.useState)(2),a=Object(n.a)(t,2),r=a[0],c=a[1],o=Object(s.useState)([]),u=Object(n.a)(o,2),j=u[0],b=u[1],f=Object(s.useState)(!0),p=Object(n.a)(f,2),O=p[0],h=p[1],m=Object(i.c)((function(e){return e.user.username}));return Object(s.useEffect)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,B.a.get("/api/transactions",{params:{username:m}});case 3:t=e.sent,b(t.data),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[e.reload]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:G.a.List,children:[Object(g.jsxs)("div",{className:G.a.Filters,children:[Object(g.jsx)("div",{className:2===r?G.a.Button:G.a.ButtonInactive,onClick:function(){return c(2)},children:"Pending"}),Object(g.jsx)("div",{className:1===r?G.a.Button:G.a.ButtonInactive,onClick:function(){return c(1)},children:"Approved"}),Object(g.jsx)("div",{className:0===r?G.a.Button:G.a.ButtonInactive,onClick:function(){return c(0)},children:"Declined"})]}),O?Object(g.jsx)("img",{src:M.a,alt:"loader",style:{display:"block",margin:"10vh auto"}}):j.map((function(e){return e.chequeStatus===r&&Object(g.jsx)(R,{status:e.chequeStatus,id:e._id},e._id)}))]})})};t.default=function(){var e=Object(s.useState)(!1),t=Object(n.a)(e,2),a=t[0],r=t[1],u=Object(s.useState)(!1),l=Object(n.a)(u,2),d=l[0],j=l[1],b=Object(o.f)(),f=Object(i.c)((function(e){return e.auth})),p=Object(i.c)((function(e){return e.user}));return f?""===p.name&&b.push("/adminDashboard"):b.push("/auth"),f&&""!==p.name&&Object(g.jsxs)("div",{children:[Object(g.jsx)(P,{showDepositModal:a,handleClose:function(){return r(!1)},setReload:j,reload:d}),Object(g.jsxs)("div",{className:c.a.Parent,children:[Object(g.jsx)(K,{reload:d}),Object(g.jsx)("div",{className:c.a.Options,children:Object(g.jsxs)("div",{className:c.a.ButtonDeposit,onClick:function(){return r(!0)},children:[Object(g.jsx)("i",{className:"fas fa-upload"}),"\xa0Deposit"]})})]})]})}}}]);
//# sourceMappingURL=5.c2650a32.chunk.js.map