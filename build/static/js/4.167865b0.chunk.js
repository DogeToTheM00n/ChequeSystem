(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{112:function(e,t,a){"use strict";t.a=function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}},113:function(e,t,a){"use strict";var n=a(25),c=a.n(n),r=a(34),s=a(112),i=a(53),o=function(){var e=Object(r.a)(c.a.mark((function e(t,a){var n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.importKey("spki",Object(s.a)(a),{name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt"]);case 2:return n=e.sent,r=new TextEncoder,e.next=6,window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r.encode(JSON.stringify(t)));case 6:return o=e.sent,e.abrupt("return",Object(i.a)(o));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();t.a=o},116:function(e,t,a){"use strict";var n=a(25),c=a.n(n),r=a(34),s=a(117),i=a(53),o=function(){var e=Object(r.a)(c.a.mark((function e(t,a){var n,r,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uint8Array.from([146,184,121,127,136,74,198,227,43,182,160,127,33,155,147,31]),e.t0=JSON,e.next=4,Object(s.a)(a);case 4:return e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.next=8,window.crypto.subtle.importKey("jwk",JSON.parse(r),{name:"AES-GCM"},!0,["encrypt","decrypt"]);case 8:return o=e.sent,console.log(o),e.next=12,window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},o,t);case 12:return u=e.sent,e.abrupt("return",Object(i.a)(u));case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();t.a=o},117:function(e,t,a){"use strict";var n=a(25),c=a.n(n),r=a(34),s=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return new Promise((function(e,s){var i=indexedDB.open("db",1);i.onerror=function(){console.error("Error",i.error)},i.onsuccess=function(){var s=i.result.transaction("keyStore","readwrite").objectStore("keyStore").get("key");s.onsuccess=Object(r.a)(c.a.mark((function r(){var i;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("key added to the store",s.result),a=s.result,console.log(a),c.next=5,window.crypto.subtle.decrypt({name:"RSA-OAEP"},a,Uint8Array.from(atob(t),(function(e){return e.charCodeAt(0)})));case 5:n=c.sent,i=new TextDecoder,n=i.decode(n),e(n);case 9:case"end":return c.stop()}}),r)}))),s.onerror=function(){console.log("Error",s.error)}}}))},e.next=3,s();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=s},119:function(e,t,a){"use strict";var n=a(141),c=a(1);t.a=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(n.a,{interval:null,variant:"dark",children:[Object(c.jsx)(n.a.Item,{children:Object(c.jsx)("img",{className:"d-block w-100",src:"data:image/png;base64,".concat(e.frontImage),alt:"First slide"})}),Object(c.jsx)(n.a.Item,{children:Object(c.jsx)("img",{className:"d-block w-100",src:"data:image/png;base64,".concat(e.backImage),alt:"Second slide"})})]})})}},127:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(41);function c(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=Object(n.a)(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var c=0,r=function(){};return{s:r,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw s}}}}},128:function(e,t,a){e.exports={Parent:"ChequeVerify_Parent__2zxBB",Left:"ChequeVerify_Left__3gNhH",Right:"ChequeVerify_Right__1NQh3",P:"ChequeVerify_P__1HhbP",ChequeVerify:"ChequeVerify_ChequeVerify__2dPza"}},130:function(e,t,a){e.exports={Left:"Left_Left__3o_V0"}},131:function(e,t,a){e.exports={Row:"Div1_Row__q98gO",PTitle:"Div1_PTitle__3Z-k4",PDetail:"Div1_PDetail__1grPy",Checkbox:"Div1_Checkbox__2k_lM",BtnGroup:"Div1_BtnGroup__1H1DW",NextBtn:"Div1_NextBtn__39llQ",DeclineBtn:"Div1_DeclineBtn__GkYfM",Error:"Div1_Error__1X3UV"}},132:function(e,t,a){e.exports={BtnGroup:"Div2_BtnGroup__3Nubq",NextBtn:"Div2_NextBtn__3pJcy",Row:"Div2_Row__3Rb3l",PTitle:"Div2_PTitle__2cPue",PDetail:"Div2_PDetail__NTA5A",Checkbox:"Div2_Checkbox__jDUF8",DeclineBtn:"Div2_DeclineBtn__3jbJX",Input:"Div2_Input__3ZV0M",VerifyAccount:"Div2_VerifyAccount__2C1OR",VerifyBtn:"Div2_VerifyBtn__1jC33",P2:"Div2_P2__3Dzw6",Error:"Div2_Error__32Pk0"}},133:function(e,t,a){e.exports={Row:"Div3_Row__3Q54D",BtnGroup:"Div3_BtnGroup__9PNoD",NextBtn:"Div3_NextBtn__1CbOR",DeclineBtn:"Div3_DeclineBtn__BEeFD",Checkbox:"Div3_Checkbox__1nvLc",P2:"Div3_P2__3-2VJ"}},142:function(e,t,a){"use strict";a.r(t);var n=a(25),c=a.n(n),r=a(127),s=a(34),i=a(13),o=a(0),u=a(128),l=a.n(u),b=a(119),j=a(2),f=a(130),d=a.n(f),h=a(10),p=a(4),m=a(5),O=a.n(m),x=a(20),v=a(8),y=a(115),N=o.createContext(null);N.displayName="InputGroupContext";var _=N,C=a(1),k=["bsPrefix","size","hasValidation","className","as"],g=Object(x.a)("input-group-text",{Component:"span"}),w=o.forwardRef((function(e,t){var a=e.bsPrefix,n=e.size,c=e.hasValidation,r=e.className,s=e.as,i=void 0===s?"div":s,u=Object(p.a)(e,k);a=Object(v.a)(a,"input-group");var l=Object(o.useMemo)((function(){return{}}),[]);return Object(C.jsx)(_.Provider,{value:l,children:Object(C.jsx)(i,Object(j.a)(Object(j.a)({ref:t},u),{},{className:O()(r,a,n&&"".concat(a,"-").concat(n),c&&"has-validation")}))})}));w.displayName="InputGroup";var D=Object.assign(w,{Text:g,Radio:function(e){return Object(C.jsx)(g,{children:Object(C.jsx)(y.a,Object(j.a)({type:"radio"},e))})},Checkbox:function(e){return Object(C.jsx)(g,{children:Object(C.jsx)(y.a,Object(j.a)({type:"checkbox"},e))})}}),S=a(131),P=a.n(S),V=function(e){var t=Object(o.useState)(""),a=Object(i.a)(t,2),n=a[0],c=a[1],r=function(t){e.setVerifyState(Object(j.a)(Object(j.a)({},e.verifyState),{},Object(h.a)({},t.target.name,t.target.checked)))};return Object(C.jsxs)("div",{children:[Object(C.jsxs)(D,{className:P.a.Row,size:"lg",children:[Object(C.jsx)("div",{children:Object(C.jsx)("p",{className:P.a.PTitle,children:"Date"})}),Object(C.jsx)(D.Checkbox,{className:P.a.Checkbox,name:"dateVerify",checked:e.verifyState.dateVerify,onChange:r})]}),Object(C.jsxs)(D,{className:P.a.Row,size:"lg",children:[Object(C.jsx)("div",{children:Object(C.jsx)("p",{className:P.a.PTitle,children:"Amount"})}),Object(C.jsx)(D.Checkbox,{className:P.a.Checkbox,name:"amountVerify",checked:e.verifyState.amountVerify,onChange:r})]}),Object(C.jsxs)(D,{className:P.a.Row,size:"lg",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{className:P.a.PTitle,children:"Account Number"}),Object(C.jsx)("p",{className:P.a.PDetail,children:e.acNo})]}),Object(C.jsx)(D.Checkbox,{className:P.a.Checkbox,name:"acNoVerify",checked:e.verifyState.acNoVerify,onChange:r})]}),Object(C.jsxs)(D,{className:P.a.Row,size:"lg",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{className:P.a.PTitle,children:"Cheque Code"}),Object(C.jsx)("p",{className:P.a.PDetail,children:e.MICR})]}),Object(C.jsx)(D.Checkbox,{className:P.a.Checkbox,name:"cCodeVerify",checked:e.verifyState.cCodeVerify,onChange:r})]}),Object(C.jsx)("div",{className:P.a.Error,children:n||null}),Object(C.jsxs)("div",{className:P.a.BtnGroup,children:[Object(C.jsx)("button",{className:P.a.DeclineBtn,onClick:function(){return e.declineCheque()},children:"Decline"}),Object(C.jsx)("button",{className:P.a.NextBtn,onClick:function(){e.verifyState.dateVerify&&e.verifyState.amountVerify&&e.verifyState.acNoVerify&&e.verifyState.cCodeVerify?e.setDiv(2):c("*Please verify all details")},children:"Next"})]})]})},B=a(132),A=a.n(B),q=a(35),R=a(118),I=function(e){var t=function(){var t=Object(s.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.get("/api/recipientName",{params:{recipientAccountNo:e.state.accountNumber}});case 2:"Invalid Account Number"===(a=t.sent).data?e.setState(Object(j.a)(Object(j.a)({},e.state),{},{accountVerify:0,recipientName:a.data})):e.setState(Object(j.a)(Object(j.a)({},e.state),{},{accountVerify:1,recipientName:a.data.recipientName}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(t){e.setState(Object(j.a)(Object(j.a)({},e.state),{},Object(h.a)({},t.target.name,t.target.value)))},n=function(){var t=Object(s.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=/^\d{15}$/,"^[1-9][0-9]*$",e.state.accountNumber.match(a)&&e.state.amount.match("^[1-9][0-9]*$")?(e.setState(Object(j.a)(Object(j.a)({},e.state),{},{err:""})),""===e.state.err&&1===e.state.accountVerify&&e.state.recipientNameCheck&&e.setDiv(3)):e.setState(Object(j.a)(Object(j.a)({},e.state),{},{err:"*Invalid Account Number or Amount"}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsxs)("p",{className:A.a.P2,onClick:function(){e.setDiv(1)},children:[Object(C.jsx)("i",{class:"fas fa-chevron-left"})," Back"]}),Object(C.jsxs)(R.a.Group,{className:"mb-4",controlId:"account",style:{width:"80%",margin:"auto"},children:[Object(C.jsx)(R.a.Label,{children:"Payee Account Number"}),Object(C.jsxs)("div",{className:A.a.VerifyAccount,children:[Object(C.jsx)(R.a.Control,{type:"text",required:!0,placeholder:"Payee Account Number",className:A.a.Input,autoFocus:!0,name:"accountNumber",onChange:a,value:e.state.accountNumber}),Object(C.jsx)("button",{className:A.a.VerifyBtn,onClick:t,children:"Verify"})]}),Object(C.jsx)("div",{})]}),Object(C.jsxs)(R.a.Group,{className:"mb-4",controlId:"amount",style:{width:"80%",margin:"auto"},children:[Object(C.jsx)(R.a.Label,{children:"Amount"}),Object(C.jsx)(R.a.Control,{type:"text",required:!0,placeholder:"Enter amount",className:A.a.Input,name:"amount",onChange:a,value:e.state.amount}),Object(C.jsx)("div",{className:A.a.Error,children:e.state.err?e.state.err:null})]}),Object(C.jsxs)(D,{className:A.a.Row,size:"lg",style:{width:"80%",margin:"auto"},children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{className:A.a.PTitle,children:"Recipient Name"}),Object(C.jsx)("p",{className:A.a.PDetail,children:e.state.recipientName})]}),Object(C.jsx)(D.Checkbox,{className:A.a.Checkbox,onChange:function(t){return e.setState(Object(j.a)(Object(j.a)({},e.state),{},{recipientNameCheck:t.target.checked}))},checked:e.state.recipientNameCheck})]}),Object(C.jsxs)("div",{className:A.a.BtnGroup,children:[Object(C.jsxs)("button",{className:A.a.DeclineBtn,onClick:function(){return e.declineCheque()},children:[Object(C.jsx)("i",{className:"fas fa-times"})," Decline"]}),Object(C.jsxs)("button",{className:A.a.NextBtn,onClick:n,children:[Object(C.jsx)("i",{className:"fas fa-check"})," Next"]})]})]})},E=a(133),G=a.n(E),T=function(e){var t=Object(o.useState)(!1),a=Object(i.a)(t,2),n=a[0],c=a[1];return Object(C.jsxs)("div",{children:[Object(C.jsxs)("p",{className:G.a.P2,onClick:function(){e.setDiv(2)},children:[Object(C.jsx)("i",{className:"fas fa-chevron-left"})," Back"]}),Object(C.jsxs)(D,{className:G.a.Row,size:"lg",children:[Object(C.jsx)("img",{style:{display:"inline",maxWidth:"50%"},src:"data:image/png;base64,".concat(e.signature),alt:"Sign"}),Object(C.jsx)(D.Checkbox,{className:G.a.Checkbox,checked:n,onChange:function(e){return c(e.target.checked)}})]}),Object(C.jsxs)("div",{className:G.a.BtnGroup,children:[Object(C.jsxs)("button",{className:G.a.DeclineBtn,onClick:function(){return e.declineCheque()},children:[Object(C.jsx)("i",{className:"fas fa-times"})," Decline"]}),Object(C.jsxs)("button",{className:G.a.NextBtn,onClick:function(){n&&e.approveCheque()},children:[Object(C.jsx)("i",{className:"fas fa-check"})," Approve"]})]})]})},L=a(113),z=a(18),M=a(6),J=a(36),U=function(e){var t=Object(o.useState)({accountVerify:0,amount:"",accountNumber:"",err:"",recipientNameCheck:!1,recipientName:""}),a=Object(i.a)(t,2),n=a[0],r=a[1],u=Object(o.useState)({dateVerify:!1,amountVerify:!1,acNoVerify:!1,cCodeVerify:!1}),l=Object(i.a)(u,2),b=l[0],f=l[1],h=Object(o.useState)(!1),p=Object(i.a)(h,2),m=p[0],O=p[1],x=Object(z.c)((function(e){return e.key})),v=Object(M.f)(),y=function(){var t=Object(s.a)(c.a.mark((function t(){var a,r,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),a={status:!0,_id:e.chequeCode},r={amount:Number(n.amount),recipientName:n.recipientName,recipientAccountNo:n.accountNumber},t.next=5,Object(L.a)(r,x);case 5:i=t.sent,a=Object(j.a)(Object(j.a)({},a),{},{object:i}),o=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.post("/api/verifyCheque",a);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o(),O(!1),v.push("/adminDashboard");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(s.a)(c.a.mark((function t(){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O(!0),a={status:!1,_id:e.chequeCode},n=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.post("/api/verifyCheque",a);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n(),O(!1),v.push("/adminDashboard");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){""===n.err&&1===n.accountVerify&&n.recipientNameCheck&&w(3)}),[n.err]);var _=Object(o.useState)(1),k=Object(i.a)(_,2),g=k[0],w=k[1];return m?Object(C.jsx)("img",{src:J.a,alt:"loader",style:{display:"block",margin:"10vh auto"}}):Object(C.jsxs)("div",{className:d.a.Left,children:[1===g&&Object(C.jsx)(V,{setDiv:w,verifyState:b,setVerifyState:f,acNo:e.acNo,MICR:e.MICR,declineCheque:N}),2===g&&Object(C.jsx)(I,{setDiv:w,state:n,setState:r,declineCheque:N}),3===g&&Object(C.jsx)(T,{setDiv:w,signature:e.signature,approveCheque:y,declineCheque:N})]})},F=a(112),H=a(116);t.default=function(){var e=Object(o.useState)(!0),t=Object(i.a)(e,2),a=t[0],n=t[1],u=Object(M.f)(),j=Object(z.c)((function(e){return e.auth})),f=Object(z.c)((function(e){return e.encryptedAesKey})),d=Object(z.c)((function(e){return e.user})),h=Object(o.useState)(""),p=Object(i.a)(h,2),m=p[0],O=p[1],x=Object(o.useState)(""),v=Object(i.a)(x,2),y=v[0],N=v[1],_=Object(o.useState)(""),k=Object(i.a)(_,2),g=k[0],w=k[1],D=Object(o.useState)(""),S=Object(i.a)(D,2),P=S[0],V=S[1],B=Object(o.useState)(""),A=Object(i.a)(B,2),R=A[0],I=A[1],E=Object(o.useState)(""),G=Object(i.a)(E,2),T=G[0],L=G[1];return j?""!==d.name&&u.push("/"):u.push("/admin"),Object(o.useEffect)((function(){var e=function(){var e=Object(s.a)(c.a.mark((function e(){var t,a,s,o,l,b,j,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!0),t=new URLSearchParams(u.location.search),a=Object(r.a)(t),e.prev=3,a.s();case 5:if((s=a.n()).done){e.next=26;break}return o=Object(i.a)(s.value,2),o[0],l=o[1],e.next=9,q.a.get("/api/detailedCheque",{params:{cheque_id:l}});case 9:return b=e.sent,console.log(b.data),O(l),e.next=14,Object(H.a)(Object(F.a)(b.data.photo[0]).buffer,f);case 14:return j=e.sent,N(j),e.next=18,Object(H.a)(Object(F.a)(b.data.photo[1]).buffer,f);case 18:d=e.sent,w(d),V(b.data.signatureImagebase64),I(b.data.acNo),L(b.data.chequeCode),n(!1);case 24:e.next=5;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),a.e(e.t0);case 31:return e.prev=31,a.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,28,31,34]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),j&&""===d.name&&(a?Object(C.jsx)("img",{src:J.a,alt:"loader",style:{display:"block",margin:"10vh auto"}}):Object(C.jsxs)("div",{className:l.a.ChequeVerify,children:[Object(C.jsxs)("p",{className:l.a.P,children:["Transaction ID: ",m]}),Object(C.jsxs)("div",{className:l.a.Parent,children:[Object(C.jsx)("div",{className:l.a.Left,children:Object(C.jsx)(U,{acNo:R,MICR:T,signature:P,chequeCode:m})}),Object(C.jsx)("div",{className:l.a.Right,children:Object(C.jsx)(b.a,{frontImage:y,backImage:g})})]})]}))}}}]);
//# sourceMappingURL=4.167865b0.chunk.js.map